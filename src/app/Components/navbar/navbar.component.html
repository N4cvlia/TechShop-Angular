<nav class="header">
    <div class="brand-container">
        <div class="brand-name"><a routerLink="Shop">TechShop</a></div>
    </div>
    <div class="search-container">
        <input type="text" class="search-input" placeholder="Search..."  [(ngModel)]="searchInput" (input)="getSearch()" (keyup.enter)="searchUp()">
        <button class="search-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
            </svg>
        </button>
        <div class="search-results" [style.display]="SearchVisib" #search>
            @for (item of searchProducts; track $index) {
                <div class="product-item" (click)="goToDetails(item)">
                    <img class="product-image" [src]="item.thumbnail">
                    <div class="product-info">
                        <h3 class="product-name">{{item.title}}</h3>
                        <p class="product-price">${{item.price.current}}</p>
                    </div>
                </div>
            }@empty {
                <div class="no-results-found">No products found</div>
            }
        </div>
    </div>
    <div class="nav-actions">
        @if(authAvail) {
            <button class="nav-button" (click)="profileDropdown($event)">
                <button id="customUserMenuBtn" class="custom_user_menu_btn_v1">
                    <img [src]="auth || 'https://cdn.pfps.gg/pfps/2301-default-2.png'" alt="avatar" id="loginImage" referrerpolicy="no-referrer" class="user-icon" style="border-radius: 50%; height: 30px; width: 30px;">
                </button>
            </button>
        }
            <button class="nav-button" routerLink="/Login" id="loginIcon" *ngIf="!authAvail">
                <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span style="font-family: Avenir;">Log In</span>
            </button>
            <div class="profileDropdown" [style.transform]="profileVisib ? 'scale(1)' : 'scale(0)'" #profile>
                <div class="profile">
                    <img [src]="auth || 'https://cdn.pfps.gg/pfps/2301-default-2.png'" style="border-radius: 50%; height: 30px; width: 30px;" class="Pfp">
                    <span>{{username}}</span>
                </div>
                <button (click)="goToProfile()" class="viewProfile" style="gap: 8px;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg> View Profile</button>
                <button (click)="logOut()" class="logOut" style="gap: 8px;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 3h6v18h-6M10 17l5-5-5-5M3 12h12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg> Log Out</button>
            </div>
        <button class="nav-button" (click)="goCart()">
            <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span class="cart-badge" id="cartNum">{{cartNum}}</span>
        </button>
    </div>
</nav>
